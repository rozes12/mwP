# # nginx.conf
# server {
#     listen $PORT; # Cloud Run exposes the port via the $PORT environment variable
#     server_name localhost; # Can be omitted or set to your domain if applicable

#     # Root directory for your static files - where the 'dist' folder content is copied
#     root /usr/share/nginx/html;

#     # Default file to serve when a directory is requested
#     index index.html index.htm;

#     # Critical for Single-Page Applications (SPAs) like React:
#     # Tries to serve the requested URI. If it's a file ($uri) or a directory ($uri/),
#     # serve it. Otherwise, fallback to index.html for client-side routing.
#     location / {
#         try_files $uri $uri/ /index.html;
#     }

#     # Optional: Gzip compression for better performance
#     gzip on;
#     gzip_vary on;
#     gzip_min_length 10240; # Minimum length to compress
#     gzip_proxied expired no-cache no-store private auth;
#     gzip_types text/plain text/css text/xml text/javascript application/x-javascript application/xml application/json;
# }


# nginx.conf
server {
    listen $PORT;
    server_name localhost;

    # --- CHANGED LINE HERE: Update the root path ---
    root /usr/share/my-react-app;
    # --- END CHANGED LINE ---

    index index.html index.htm;

    location / {
        try_files $uri $uri/ /index.html;
    }

    gzip on;
    gzip_vary on;
    gzip_min_length 10240;
    gzip_proxied expired no-cache no-store private auth;
    gzip_types text/plain text/css text/xml text/javascript application/x-javascript application/xml application/json;
}